@using Microsoft.AspNetCore.Components.Routing

<div class="sidebar-nav">
    <div class="@(IsCollapsed ? "collapsed" : "") title">
        @Title
    </div>
    @foreach (var item in NavItems)
    {
        <div class="nav-group">
            <div class="nav-item parent" @onclick="() => Toggle(item)">
                <i class="@item.Icon"></i>
                <span>@item.Title</span>
                <i class="bi @(item.IsExpanded ? "bi-chevron-down" : "bi-chevron-right") toggle-icon"></i>
            </div>
            <div class="nav-children @(item.IsExpanded ? "expanded" : "collapsed")">
                @foreach (var child in item.Children ?? Enumerable.Empty<NavItem>())
                {
                    <NavLink class="nav-item child" href="@child.Href" Match="NavLinkMatch.All">
                        <i class="@child.Icon"></i>
                        <span>@child.Title</span>
                    </NavLink>
                }
            </div>

        </div>
    }
    <div class="nev-drawer">
    </div>

</div>


@code {
    [Parameter]
    public List<NavItem> NavItems { get; set; } = new();
    [Parameter]
    public RenderFragment Title { get; set; }
    private bool IsCollapsed = false;

    private void Toggle(NavItem item)
    {
        item.IsExpanded = !item.IsExpanded;
    }
    private void Toggle()
    {
        NavItems.ForEach(x => x.IsExpanded = false);
        IsCollapsed = !IsCollapsed;
    }

    public class NavItem
    {
        public string Title { get; set; } = "";
        public string Href { get; set; } = "";
        public string Icon { get; set; } = "bi bi-dot";
        public bool IsExpanded { get; set; } = false;
        public List<NavItem>? Children { get; set; }
    }
}
<style>
    .sidebar-nav {
        width: 14rem;
        height: 100vh;
        background-color: #f8f9fa;
        color: #333;
        padding-top: 1rem;
        overflow-y: auto;
        resize: horizontal;
    }

        .sidebar-nav ::-webkit-scrollbar {
            display: none;
        }

        .sidebar-nav .title {
            margin: 1rem 4rem 1rem;
            text-align: center;
            font-size: 1.3rem;
        }

            .sidebar-nav .title .collapsed {
                display: none;
            }

    .nav-item {
        display: flex;
        align-items: center;
        padding: 0.6rem 1rem;
        color: #555;
        text-decoration: none;
        cursor: pointer;
        transition: all ease-in-out 0.2s;
    }

        .nav-item:hover {
            background-color: #e9ecef;
            color: #212529;
        }

        .nav-item.active {
            background-color: #dee2e6;
            color: #000;
            font-weight: 600;
        }

        .nav-item i {
            margin-right: 0.6rem;
        }



    .nav-group .toggle-icon {
        margin-left: auto;
        font-size: 0.9rem;
    }

    .nav-children {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-in-out;
    }

        .nav-children.expanded {
            display: block;
            max-height: 500px;
        }

    .nav-item.child {
        padding-left: 2.5rem;
        font-size: 0.95rem;
    }

</style>
